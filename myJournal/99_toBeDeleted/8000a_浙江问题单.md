
浙江电信/联通（8000A/3716M/512M内存/4G Nand Flash）：


23. 切换PPPOE接入重启机顶盒后且接入launcher后按任何键都无响应  
     ----存在问题22同样报错  
     ----该问题已经定位修改好了，为开机时接受到服务器backup升级请求，然后apk进行文件写入操作时错误导致进度条挂掉，而升级Activity(透明) 在launcher前显示，捕获了所有的操作，故而launcher无操作，现在改为捕获所有写入backup错误，当写入错误时直接结束升级进程。  

22. IPTV无响应问题  
      ----图片本身问题，下发gif图片，文件名为.jpg  

21. 【浙江电信】【EC6106V3B-80102441】【网管升级】下载升级包时进度条为100%时,停留10s以上；下载升级包完成后重启会闪屏，出现条纹。  
CCB结论：继续分析：掉电重启无花屏，下载后重启有花屏，需要分析两种场景的差异。如果问题本身无法解决，考虑重启前先关掉HDMI规避影响。   
====添加关输出接口，代码修改见display.diff displayservice.diff  

20. 【浙江电信】backup升级失败，改动backup里边内容后发现backup目录的权限变成root  
====我这边两个盒子烧写镜像、升级版本跟深圳环境同步也一直没有复现问题，深圳那边在插入网线后就必现问题。将backup的挂载由原来的vold挂载换到init.rc中挂载问题就没有再复现了，问题比较奇怪，具体原因不清楚。代码修改见backup.diff  

19. 裁减cat后toolbox导致安装apk失败  
     ----Android.mk中用SWTARGET_DEBUG 标识了debug和release两个版本，release中裁掉了rm/chmod/chown/mv/kill/。  

18. 支持鼠标、键盘  
     ----插上键盘指示灯不亮，结果不是硬件供电异常。只有在各个映射成功灯才亮同时按键响应。  
     ----最新版本Generic.kl有问题， 回退到12/19/2012版本，中樱遥控器适配引入的问题  

17. 浙江电信二期补丁版本（EC6106V3  8000A）涉及底层的问题。 
【1】前面板待机后无法唤醒。  
原因：更新hi_c51.ko。 
【2】【开关机】 在网络异常情况下的待机，设置盒子为静态IP（dhcp、pppoe）接入，拔掉网线，机顶盒报了1000错误码后，前面板待机，待机时间为6秒，时间太长  
预期：1~2秒 
    ----大系统中曾经删掉hi_c51.ko,后来发现大系统编译不过，又上传回去。此c51驱动是ok的，但CI 新编译出的ko文件有问题。  

16. recovery中升级patch包失败  
    ----日志中显示python脚本去找/cache下的东西没有成功导致升级失败，在recovery中外部升级流程中添加/cache分区的挂载。  

15. 【待机】在设置页面，按下前面板电源键，页面先跳转到launcher页面然后关闭视频输出。  
    ----//前面板待机键  
![pic_002](res/8000a_浙江问题单/8000a_002.png)
遥控器返回键    
![pic_001](res/8000a_浙江问题单/8000a_001.png)
前面板待机键上抛了两个键值，应该是前面板驱动对待机键处理这块有问题  

14. 断电重启，又出现进入recovery页面。   
    ----问了下张天义，断电重启前除了在设置页面里配置了下账号和密码，没有什么别的特别的操作。
而且进recovery后，没有注意左下角有什么打印变化。
除了各种升级，串口操作misc，烧写misc镜像，按任意遥控器任意键外，遥控器的操作不会有进recovery的触发。
该问题极难复现，现在只能怀疑到有别的地方有遥控器在按然后触发了进recovery。没法继续定位处理，请知悉！

13. 【待机、Led】6台盒子有4台盒子待机下去后前面板的按键不能唤醒  
    ----c51代码只有8940L改过一次，用最新代码编译的c51.ko不好使，用之前的c51.ko好使，郭甲上传之前的文件解决本次问题。  
    ----Todo: 排查原因是否是8940L的改动影响到浙江版本了，日后重新编译大系统中驱动然后同步到浙江电信的话还会有此问题，另外其他项目也有可能会有影响。  

14. 【待机、LED】待机下去灯不变红  
    ----power中添加待机前led灯控制  
    ----system/core/swNetLinkLed/netStatusLed.c      system/core/SWService/SWServer/netStatusLed.cpp中获取待机属性，获取到的则不再去点亮网络灯  

13. 【待机】待机唤醒进入lancher时，lancher展示很乱  
    ----是launcher中某几个模块的画面花了，  
    ----海思解决，内存边界有重叠  

12. 【本地播放】本地播放多字幕的片源待机唤醒后，机顶盒黑屏一闪一闪的或者卡在开机logo画面  
    ----卡在开机logo 是由于认证不通过导致，范纯泰处理。  
    ----还是在那一台盒子上又复现过一次，电视上黑屏并会闪现条纹。 
    ----full_godbox-ota-80102109 版本，在另外一台盒子上反复待机30次未复现该问题。  

11. 【网络、中间件】待机后，再多次按待机确定，唤醒后出现认证失败（认证大概20s左右），然后出现“错误代码：10071”，此时机顶盒ping现网EPG服务器115.233.2.179不通。  
    ----试过dhcp、静态ip的配置，出现10071错误码情况多次，在出现报错页面后去检测网络没有复现网络不通的情况，此时去ping www.baidu.com是可以通的，115.233.2.179一直没有ping通就没关心了，ping百度能通说明网络是ok的。试过92、91、85、80多个版本，在开机时候都出现多次10071报错，也就是说跟待机、待机起来后按键没有关系。  
    ----在开机刚拿到ip时候，去ping百度能收到六七秒的回复信息然后就不动了，如果不动它就一直卡在那，如果ctrl-c停掉再去ping是能通的。感觉有什么设置使得网络突然不好使了一两秒。  
    ----在ping百度时，ping卡住了，但是网络包显示：机顶盒和EPG还在正常交互。网络应该没有问题，但是10071的问题没复现。  
    ----从抓包来看，最后一次待机唤醒，未向外发送discover包，这个应该是概率的，需要唐安查一下DHCP这块。另外，当网络未通，iptv不应该被拉起，需要大韦帮忙看一下  
    ----待机起来后添加网卡复位，问题解决。/hardware/libhardware_legacy/power/power.c  

10. 【wifi】浙江联通一直wifi驱动，内置reltek8188EUS芯片；浙江电信二期移植wifi驱动，支持外置wifi  
    ----android_3716C_8000A/device/hisilicon/godbox/driver/sdk/msp/android_driver/rtl8188EUS_rtl8189ES_linux_v4.1.5_7309_patched_20130515编译得到驱动文件  
    ----浙江电信支持8188，浙江联通小系统中同步最新rtl8188eus.ko  
    ----发现问题：85-91几个版本选择wifi热点去连接时候跳到Staring，在小系统中手动编译的版本没有发现此问题。  

9. 【遥控器】基于浙江联通添加r506a遥控器  
    ----device/hisilicon/godbox/driver/sdk/msp/android_driver/hi_keypad_8000A/ir_keypad.h中添加遥控器物理码， ir_keypad.c中添加遥控器类型判断及逻辑键值上抛  
    ----hardware/libhardware_legacy/power/swsleep.c添加power键的键值使得待机可唤醒  
    ----CI不会去编译驱动，而且编译出来的驱动文件名为ir_keypad.ko，需收到改名hi_keypad.ko然后手动上传到浙江电信、浙江联通的小系统中  

8. 【Launcher】有一台盒子不能点击进入Lanucher页面的栏目，但是点击华数apk应用之后，每次都能够点击进入  
    ----待apk先排查  
    ----上层李贺解决  

7. 【待机、wifi】无线接入应用，待机起来概率会把无线关闭  
    ----红宇支持，待机起来检测，如果异常重启wifi  

6. 【bootimg】请帮忙编译一个打开串口的boot.img。并制作成压宿包   
    ----修改cmdline   

5. 【升级】OTT版本升至融合版本无法起机，卡在starting画面，擦除DATA分区后正常  
//这个问题断断续续发现过好几次，能确认到版本号的一次升级时201版本升107版本。还请先分析定位出原因。 
    ----挂起  

4. 【待机、Launcher】Lanucher页面进入到设置页面，此时按按面板待机键，页面会先跳转到Lanucher首页在进行待机，遥控器待机会直接进入待机状态  
    ----上层处理  

3. 【待机、闪屏】出现一次遥控器待机起来，高清画面不断闪屏，切换到标清正常，切回高清继续闪屏，检查高清线插入OK，再次待机起来恢复正常  
    ----这个感觉跟具体硬件相关（比如线的接触），这个待再多次出现以后再看吧  
 
2. 【recovery】从backup分区恢复系统，install过程中断电，多次重启机顶盒，卡在第一张开机LOGO处  
----从日志上看来kernel数据损坏了，导致只能起到fastboot，显示的也就只有fastboot的logo。问题描述中也有中途断电的操作，应该是这个时候写kernel数据没有写完整导致，所以这个问题复现也不好复现。不知道有没有要求说即使升级、backup分区恢复的过程中断电也绝对不允许出问题的？  
NAND read: device 0 offset 0x3800000, size 0x800000  
8388608 bytes read: OK  
kernel @ 80008000 (4253812 bytes)  
ramdisk @ 81000000 (165455 bytes)    
page size @ 2048 bytes  
initrd rd_start = 81000000,rd_end = 8102864f  
Booting kernel from Legacy Image at 82000800 ...  
Image Name: Linux-3.0.8_hisilicon  
Image Type: ARM Linux Kernel Image (uncompressed)  
Data Size: 4253748 Bytes = 4.1 MiB  
Load Address: 80800000  
Entry Point: 80800000   
Verifying Checksum ... Bad Data CRC  
fastboot#  
fastboot#  
     --------问题分析：在backup升级过程中断电，boot、system这些关键的数据可能被破坏，再次上电后由于恢复了misc分区，自动进入recovery。在进入recovery时首先会去修改misc分区使得以后不会自动进入recovery，如果这次不进行backup升级以完整的升级版本，下次将试图进入android系统，这时如果有关键数据损坏导致系统起不来则会出现画面停留在开机logo的现象。  
尝试方案：调整原生android进入recovery的逻辑，使得在recovery中成功做完一项操作才修改对应标记进入android系统，在进入android系统失败时进入recovery。副作用：越做发现牵涉东西越多，很难保证不引入其他问题。  
建议方案：按遥控器进入recovery！  
----是不是可以加一个misc标记 表示backup升级、各种其他升级的操作没有完成  开机就直接去继续各自的升级  这样貌似能省下很多麻烦 

1. 【recovery】重启概率进入到recovery界面，暂未找到必现条件。（同一个盒子已经出现2次）  
----我这重启了大概十次，没有复现这个问题，不知道是不是需要更多次的重复试验?  
----重新试验50多次没有复现改问题  
